0000	23 70 72 61 67 6d 61 20  6f 6e 63 65 0d 0a 0d 0a   #pragma once....
0010	23 69 6e 63 6c 75 64 65  20 22 56 75 6c 6b 61 6e   #include "Vulkan
0020	52 65 6e 64 65 72 65 72  2e 68 22 0d 0a 23 69 6e   Renderer.h"..#in
0030	63 6c 75 64 65 20 22 50  42 52 4d 61 74 65 72 69   clude "PBRMateri
0040	61 6c 2e 68 22 0d 0a 23  69 6e 63 6c 75 64 65 20   al.h"..#include 
0050	22 4d 65 73 68 2e 68 22  0d 0a 23 69 6e 63 6c 75   "Mesh.h"..#inclu
0060	64 65 20 22 43 61 6d 65  72 61 2e 68 22 0d 0a 23   de "Camera.h"..#
0070	69 6e 63 6c 75 64 65 20  22 4c 69 67 68 74 2e 68   include "Light.h
0080	22 0d 0a 23 69 6e 63 6c  75 64 65 20 22 53 68 61   "..#include "Sha
0090	64 6f 77 4d 61 70 2e 68  22 0d 0a 23 69 6e 63 6c   dowMap.h"..#incl
00a0	75 64 65 20 22 50 6f 73  74 50 72 6f 63 65 73 73   ude "PostProcess
00b0	50 69 70 65 6c 69 6e 65  2e 68 22 0d 0a 23 69 6e   Pipeline.h"..#in
00c0	63 6c 75 64 65 20 3c 67  6c 6d 2f 67 6c 6d 2e 68   clude <glm/glm.h
00d0	70 70 3e 0d 0a 23 69 6e  63 6c 75 64 65 20 3c 76   pp>..#include <v
00e0	65 63 74 6f 72 3e 0d 0a  23 69 6e 63 6c 75 64 65   ector>..#include
00f0	20 3c 6d 65 6d 6f 72 79  3e 0d 0a 0d 0a 6e 61 6d    <memory>....nam
0100	65 73 70 61 63 65 20 53  70 61 72 6b 79 20 7b 0d   espace Sparky {.
0110	0a 20 20 20 20 2f 2a 2a  0d 0a 20 20 20 20 20 2a   .    /**..     *
0120	20 40 62 72 69 65 66 20  41 64 76 61 6e 63 65 64    @brief Advanced
0130	20 50 68 79 73 69 63 61  6c 6c 79 20 42 61 73 65    Physically Base
0140	64 20 52 65 6e 64 65 72  69 6e 67 20 52 65 6e 64   d Rendering Rend
0150	65 72 65 72 0d 0a 20 20  20 20 20 2a 20 0d 0a 20   erer..     * .. 
0160	20 20 20 20 2a 20 49 6d  70 6c 65 6d 65 6e 74 73       * Implements
0170	20 61 64 76 61 6e 63 65  64 20 50 42 52 20 74 65    advanced PBR te
0180	63 68 6e 69 71 75 65 73  20 69 6e 63 6c 75 64 69   chniques includi
0190	6e 67 3a 0d 0a 20 20 20  20 20 2a 20 2d 20 49 6d   ng:..     * - Im
01a0	61 67 65 2d 42 61 73 65  64 20 4c 69 67 68 74 69   age-Based Lighti
01b0	6e 67 20 28 49 42 4c 29  0d 0a 20 20 20 20 20 2a   ng (IBL)..     *
01c0	20 2d 20 48 44 52 20 72  65 6e 64 65 72 69 6e 67    - HDR rendering
01d0	0d 0a 20 20 20 20 20 2a  20 2d 20 54 6f 6e 65 20   ..     * - Tone 
01e0	6d 61 70 70 69 6e 67 0d  0a 20 20 20 20 20 2a 20   mapping..     * 
01f0	2d 20 53 63 72 65 65 6e  20 53 70 61 63 65 20 52   - Screen Space R
0200	65 66 6c 65 63 74 69 6f  6e 73 20 28 53 53 52 29   eflections (SSR)
0210	0d 0a 20 20 20 20 20 2a  20 2d 20 53 63 72 65 65   ..     * - Scree
0220	6e 20 53 70 61 63 65 20  41 6d 62 69 65 6e 74 20   n Space Ambient 
0230	4f 63 63 6c 75 73 69 6f  6e 20 28 53 53 41 4f 29   Occlusion (SSAO)
0240	0d 0a 20 20 20 20 20 2a  20 2d 20 47 6c 6f 62 61   ..     * - Globa
0250	6c 20 49 6c 6c 75 6d 69  6e 61 74 69 6f 6e 20 61   l Illumination a
0260	70 70 72 6f 78 69 6d 61  74 69 6f 6e 0d 0a 20 20   pproximation..  
0270	20 20 20 2a 20 2d 20 53  68 61 64 6f 77 20 6d 61      * - Shadow ma
0280	70 70 69 6e 67 20 77 69  74 68 20 43 61 73 63 61   pping with Casca
0290	64 65 64 20 53 68 61 64  6f 77 20 4d 61 70 73 20   ded Shadow Maps 
02a0	28 43 53 4d 29 0d 0a 20  20 20 20 20 2a 20 2d 20   (CSM)..     * - 
02b0	50 6f 73 74 2d 70 72 6f  63 65 73 73 69 6e 67 20   Post-processing 
02c0	65 66 66 65 63 74 73 0d  0a 20 20 20 20 20 2a 2f   effects..     */
02d0	0d 0a 20 20 20 20 63 6c  61 73 73 20 50 42 52 52   ..    class PBRR
02e0	65 6e 64 65 72 65 72 20  7b 0d 0a 20 20 20 20 70   enderer {..    p
02f0	75 62 6c 69 63 3a 0d 0a  20 20 20 20 20 20 20 20   ublic:..        
0300	50 42 52 52 65 6e 64 65  72 65 72 28 29 3b 0d 0a   PBRRenderer();..
0310	20 20 20 20 20 20 20 20  7e 50 42 52 52 65 6e 64           ~PBRRend
0320	65 72 65 72 28 29 3b 0d  0a 0d 0a 20 20 20 20 20   erer();....     
0330	20 20 20 2f 2f 20 49 6e  69 74 69 61 6c 69 7a 61      // Initializa
0340	74 69 6f 6e 0d 0a 20 20  20 20 20 20 20 20 62 6f   tion..        bo
0350	6f 6c 20 69 6e 69 74 69  61 6c 69 7a 65 28 56 75   ol initialize(Vu
0360	6c 6b 61 6e 52 65 6e 64  65 72 65 72 2a 20 76 75   lkanRenderer* vu
0370	6c 6b 61 6e 52 65 6e 64  65 72 65 72 29 3b 0d 0a   lkanRenderer);..
0380	20 20 20 20 20 20 20 20  76 6f 69 64 20 73 68 75           void shu
0390	74 64 6f 77 6e 28 29 3b  0d 0a 0d 0a 20 20 20 20   tdown();....    
03a0	20 20 20 20 2f 2f 20 52  65 6e 64 65 72 69 6e 67       // Rendering
03b0	0d 0a 20 20 20 20 20 20  20 20 76 6f 69 64 20 62   ..        void b
03c0	65 67 69 6e 53 63 65 6e  65 28 63 6f 6e 73 74 20   eginScene(const 
03d0	43 61 6d 65 72 61 26 20  63 61 6d 65 72 61 29 3b   Camera& camera);
03e0	0d 0a 20 20 20 20 20 20  20 20 76 6f 69 64 20 65   ..        void e
03f0	6e 64 53 63 65 6e 65 28  29 3b 0d 0a 20 20 20 20   ndScene();..    
0400	20 20 20 20 0d 0a 20 20  20 20 20 20 20 20 2f 2f       ..        //
0410	20 53 75 62 6d 69 74 20  6f 62 6a 65 63 74 73 20    Submit objects 
0420	66 6f 72 20 72 65 6e 64  65 72 69 6e 67 0d 0a 20   for rendering.. 
0430	20 20 20 20 20 20 20 76  6f 69 64 20 73 75 62 6d          void subm
0440	69 74 4d 65 73 68 28 63  6f 6e 73 74 20 4d 65 73   itMesh(const Mes
0450	68 26 20 6d 65 73 68 2c  20 63 6f 6e 73 74 20 50   h& mesh, const P
0460	42 52 4d 61 74 65 72 69  61 6c 26 20 6d 61 74 65   BRMaterial& mate
0470	72 69 61 6c 2c 20 63 6f  6e 73 74 20 67 6c 6d 3a   rial, const glm:
0480	3a 6d 61 74 34 26 20 6d  6f 64 65 6c 4d 61 74 72   :mat4& modelMatr
0490	69 78 29 3b 0d 0a 20 20  20 20 20 20 20 20 0d 0a   ix);..        ..
04a0	20 20 20 20 20 20 20 20  2f 2f 20 4c 69 67 68 74           // Light
04b0	69 6e 67 0d 0a 20 20 20  20 20 20 20 20 76 6f 69   ing..        voi
04c0	64 20 73 65 74 44 69 72  65 63 74 69 6f 6e 61 6c   d setDirectional
04d0	4c 69 67 68 74 28 63 6f  6e 73 74 20 4c 69 67 68   Light(const Ligh
04e0	74 26 20 6c 69 67 68 74  29 3b 0d 0a 20 20 20 20   t& light);..    
04f0	20 20 20 20 76 6f 69 64  20 61 64 64 50 6f 69 6e       void addPoin
0500	74 4c 69 67 68 74 28 63  6f 6e 73 74 20 4c 69 67   tLight(const Lig
0510	68 74 26 20 6c 69 67 68  74 29 3b 0d 0a 20 20 20   ht& light);..   
0520	20 20 20 20 20 76 6f 69  64 20 63 6c 65 61 72 50        void clearP
0530	6f 69 6e 74 4c 69 67 68  74 73 28 29 3b 0d 0a 20   ointLights();.. 
0540	20 20 20 20 20 20 20 0d  0a 20 20 20 20 20 20 20          ..       
0550	20 2f 2f 20 53 68 61 64  6f 77 20 6d 61 70 70 69    // Shadow mappi
0560	6e 67 0d 0a 20 20 20 20  20 20 20 20 76 6f 69 64   ng..        void
0570	20 73 65 74 53 68 61 64  6f 77 4d 61 70 28 53 68    setShadowMap(Sh
0580	61 64 6f 77 4d 61 70 2a  20 73 68 61 64 6f 77 4d   adowMap* shadowM
0590	61 70 29 3b 0d 0a 20 20  20 20 20 20 20 20 53 68   ap);..        Sh
05a0	61 64 6f 77 4d 61 70 2a  20 67 65 74 53 68 61 64   adowMap* getShad
05b0	6f 77 4d 61 70 28 29 20  63 6f 6e 73 74 3b 0d 0a   owMap() const;..
05c0	20 20 20 20 20 20 20 20  0d 0a 20 20 20 20 20 20           ..      
05d0	20 20 76 6f 69 64 20 73  65 74 53 68 61 64 6f 77     void setShadow
05e0	73 45 6e 61 62 6c 65 64  28 62 6f 6f 6c 20 65 6e   sEnabled(bool en
05f0	61 62 6c 65 64 29 3b 0d  0a 20 20 20 20 20 20 20   abled);..       
0600	20 62 6f 6f 6c 20 69 73  53 68 61 64 6f 77 73 45    bool isShadowsE
0610	6e 61 62 6c 65 64 28 29  20 63 6f 6e 73 74 3b 0d   nabled() const;.
0620	0a 20 20 20 20 20 20 20  20 0d 0a 20 20 20 20 20   .        ..     
0630	20 20 20 2f 2f 20 50 6f  73 74 2d 70 72 6f 63 65      // Post-proce
0640	73 73 69 6e 67 0d 0a 20  20 20 20 20 20 20 20 50   ssing..        P
0650	6f 73 74 50 72 6f 63 65  73 73 50 69 70 65 6c 69   ostProcessPipeli
0660	6e 65 2a 20 67 65 74 50  6f 73 74 50 72 6f 63 65   ne* getPostProce
0670	73 73 50 69 70 65 6c 69  6e 65 28 29 20 63 6f 6e   ssPipeline() con
0680	73 74 3b 0d 0a 20 20 20  20 20 20 20 20 0d 0a 20   st;..        .. 
0690	20 20 20 20 20 20 20 76  6f 69 64 20 73 65 74 48          void setH
06a0	44 52 28 62 6f 6f 6c 20  65 6e 61 62 6c 65 64 29   DR(bool enabled)
06b0	3b 0d 0a 20 20 20 20 20  20 20 20 62 6f 6f 6c 20   ;..        bool 
06c0	69 73 48 44 52 45 6e 61  62 6c 65 64 28 29 20 63   isHDREnabled() c
06d0	6f 6e 73 74 3b 0d 0a 20  20 20 20 20 20 20 20 0d   onst;..        .
06e0	0a 20 20 20 20 20 20 20  20 76 6f 69 64 20 73 65   .        void se
06f0	74 42 6c 6f 6f 6d 28 62  6f 6f 6c 20 65 6e 61 62   tBloom(bool enab
0700	6c 65 64 29 3b 0d 0a 20  20 20 20 20 20 20 20 62   led);..        b
0710	6f 6f 6c 20 69 73 42 6c  6f 6f 6d 45 6e 61 62 6c   ool isBloomEnabl
0720	65 64 28 29 20 63 6f 6e  73 74 3b 0d 0a 20 20 20   ed() const;..   
0730	20 20 20 20 20 0d 0a 20  20 20 20 20 20 20 20 76        ..        v
0740	6f 69 64 20 73 65 74 45  78 70 6f 73 75 72 65 28   oid setExposure(
0750	66 6c 6f 61 74 20 65 78  70 6f 73 75 72 65 29 3b   float exposure);
0760	0d 0a 20 20 20 20 20 20  20 20 66 6c 6f 61 74 20   ..        float 
0770	67 65 74 45 78 70 6f 73  75 72 65 28 29 20 63 6f   getExposure() co
0780	6e 73 74 3b 0d 0a 20 20  20 20 20 20 20 20 0d 0a   nst;..        ..
0790	20 20 20 20 20 20 20 20  76 6f 69 64 20 73 65 74           void set
07a0	47 61 6d 6d 61 28 66 6c  6f 61 74 20 67 61 6d 6d   Gamma(float gamm
07b0	61 29 3b 0d 0a 20 20 20  20 20 20 20 20 66 6c 6f   a);..        flo
07c0	61 74 20 67 65 74 47 61  6d 6d 61 28 29 20 63 6f   at getGamma() co
07d0	6e 73 74 3b 0d 0a 20 20  20 20 20 20 20 20 0d 0a   nst;..        ..
07e0	20 20 20 20 20 20 20 20  76 6f 69 64 20 73 65 74           void set
07f0	43 68 72 6f 6d 61 74 69  63 41 62 65 72 72 61 74   ChromaticAberrat
0800	69 6f 6e 45 6e 61 62 6c  65 64 28 62 6f 6f 6c 20   ionEnabled(bool 
0810	65 6e 61 62 6c 65 64 29  3b 0d 0a 20 20 20 20 20   enabled);..     
0820	20 20 20 62 6f 6f 6c 20  69 73 43 68 72 6f 6d 61      bool isChroma
0830	74 69 63 41 62 65 72 72  61 74 69 6f 6e 45 6e 61   ticAberrationEna
0840	62 6c 65 64 28 29 20 63  6f 6e 73 74 3b 0d 0a 20   bled() const;.. 
0850	20 20 20 20 20 20 20 0d  0a 20 20 20 20 20 20 20          ..       
0860	20 76 6f 69 64 20 73 65  74 46 69 6c 6d 47 72 61    void setFilmGra
0870	69 6e 45 6e 61 62 6c 65  64 28 62 6f 6f 6c 20 65   inEnabled(bool e
0880	6e 61 62 6c 65 64 29 3b  0d 0a 20 20 20 20 20 20   nabled);..      
0890	20 20 62 6f 6f 6c 20 69  73 46 69 6c 6d 47 72 61     bool isFilmGra
08a0	69 6e 45 6e 61 62 6c 65  64 28 29 20 63 6f 6e 73   inEnabled() cons
08b0	74 3b 0d 0a 20 20 20 20  20 20 20 20 0d 0a 20 20   t;..        ..  
08c0	20 20 20 20 20 20 76 6f  69 64 20 73 65 74 4d 6f         void setMo
08d0	74 69 6f 6e 42 6c 75 72  45 6e 61 62 6c 65 64 28   tionBlurEnabled(
08e0	62 6f 6f 6c 20 65 6e 61  62 6c 65 64 29 3b 0d 0a   bool enabled);..
08f0	20 20 20 20 20 20 20 20  62 6f 6f 6c 20 69 73 4d           bool isM
0900	6f 74 69 6f 6e 42 6c 75  72 45 6e 61 62 6c 65 64   otionBlurEnabled
0910	28 29 20 63 6f 6e 73 74  3b 0d 0a 20 20 20 20 20   () const;..     
0920	20 20 20 0d 0a 20 20 20  20 20 20 20 20 76 6f 69      ..        voi
0930	64 20 73 65 74 44 65 70  74 68 4f 66 46 69 65 6c   d setDepthOfFiel
0940	64 45 6e 61 62 6c 65 64  28 62 6f 6f 6c 20 65 6e   dEnabled(bool en
0950	61 62 6c 65 64 29 3b 0d  0a 20 20 20 20 20 20 20   abled);..       
0960	20 62 6f 6f 6c 20 69 73  44 65 70 74 68 4f 66 46    bool isDepthOfF
0970	69 65 6c 64 45 6e 61 62  6c 65 64 28 29 20 63 6f   ieldEnabled() co
0980	6e 73 74 3b 0d 0a 0d 0a  20 20 20 20 20 20 20 20   nst;....        
0990	2f 2f 20 49 42 4c 20 28  49 6d 61 67 65 2d 42 61   // IBL (Image-Ba
09a0	73 65 64 20 4c 69 67 68  74 69 6e 67 29 0d 0a 20   sed Lighting).. 
09b0	20 20 20 20 20 20 20 76  6f 69 64 20 73 65 74 49          void setI
09c0	42 4c 28 62 6f 6f 6c 20  65 6e 61 62 6c 65 64 29   BL(bool enabled)
09d0	3b 0d 0a 20 20 20 20 20  20 20 20 62 6f 6f 6c 20   ;..        bool 
09e0	69 73 49 42 4c 45 6e 61  62 6c 65 64 28 29 20 63   isIBLEnabled() c
09f0	6f 6e 73 74 3b 0d 0a 20  20 20 20 20 20 20 20 0d   onst;..        .
0a00	0a 20 20 20 20 20 20 20  20 76 6f 69 64 20 73 65   .        void se
0a10	74 45 6e 76 69 72 6f 6e  6d 65 6e 74 4d 61 70 28   tEnvironmentMap(
0a20	75 6e 73 69 67 6e 65 64  20 69 6e 74 20 63 75 62   unsigned int cub
0a30	65 6d 61 70 54 65 78 74  75 72 65 49 64 29 3b 0d   emapTextureId);.
0a40	0a 20 20 20 20 20 20 20  20 75 6e 73 69 67 6e 65   .        unsigne
0a50	64 20 69 6e 74 20 67 65  74 45 6e 76 69 72 6f 6e   d int getEnviron
0a60	6d 65 6e 74 4d 61 70 28  29 20 63 6f 6e 73 74 3b   mentMap() const;
0a70	0d 0a 0d 0a 20 20 20 20  20 20 20 20 2f 2f 20 52   ....        // R
0a80	65 6e 64 65 72 20 74 6f  20 73 63 72 65 65 6e 0d   ender to screen.
0a90	0a 20 20 20 20 20 20 20  20 76 6f 69 64 20 72 65   .        void re
0aa0	6e 64 65 72 28 29 3b 0d  0a 0d 0a 20 20 20 20 70   nder();....    p
0ab0	72 69 76 61 74 65 3a 0d  0a 20 20 20 20 20 20 20   rivate:..       
0ac0	20 2f 2f 20 49 6e 74 65  72 6e 61 6c 20 73 74 72    // Internal str
0ad0	75 63 74 75 72 65 73 0d  0a 20 20 20 20 20 20 20   uctures..       
0ae0	20 73 74 72 75 63 74 20  52 65 6e 64 65 72 4f 62    struct RenderOb
0af0	6a 65 63 74 20 7b 0d 0a  20 20 20 20 20 20 20 20   ject {..        
0b00	20 20 20 20 63 6f 6e 73  74 20 4d 65 73 68 2a 20       const Mesh* 
0b10	6d 65 73 68 3b 0d 0a 20  20 20 20 20 20 20 20 20   mesh;..         
0b20	20 20 20 63 6f 6e 73 74  20 50 42 52 4d 61 74 65      const PBRMate
0b30	72 69 61 6c 2a 20 6d 61  74 65 72 69 61 6c 3b 0d   rial* material;.
0b40	0a 20 20 20 20 20 20 20  20 20 20 20 20 67 6c 6d   .            glm
0b50	3a 3a 6d 61 74 34 20 6d  6f 64 65 6c 4d 61 74 72   ::mat4 modelMatr
0b60	69 78 3b 0d 0a 20 20 20  20 20 20 20 20 7d 3b 0d   ix;..        };.
0b70	0a 0d 0a 20 20 20 20 20  20 20 20 2f 2f 20 50 72   ...        // Pr
0b80	69 76 61 74 65 20 6d 65  74 68 6f 64 73 0d 0a 20   ivate methods.. 
0b90	20 20 20 20 20 20 20 76  6f 69 64 20 73 65 74 75          void setu
0ba0	70 50 42 52 50 69 70 65  6c 69 6e 65 28 29 3b 0d   pPBRPipeline();.
0bb0	0a 20 20 20 20 20 20 20  20 76 6f 69 64 20 73 65   .        void se
0bc0	74 75 70 50 6f 73 74 50  72 6f 63 65 73 73 69 6e   tupPostProcessin
0bd0	67 28 29 3b 0d 0a 20 20  20 20 20 20 20 20 76 6f   g();..        vo
0be0	69 64 20 73 65 74 75 70  49 42 4c 28 29 3b 0d 0a   id setupIBL();..
0bf0	20 20 20 20 20 20 20 20  76 6f 69 64 20 73 65 74           void set
0c00	75 70 53 68 61 64 6f 77  4d 61 70 70 69 6e 67 28   upShadowMapping(
0c10	29 3b 0d 0a 20 20 20 20  20 20 20 20 0d 0a 20 20   );..        ..  
0c20	20 20 20 20 20 20 76 6f  69 64 20 72 65 6e 64 65         void rende
0c30	72 53 63 65 6e 65 28 29  3b 0d 0a 20 20 20 20 20   rScene();..     
0c40	20 20 20 76 6f 69 64 20  72 65 6e 64 65 72 50 6f      void renderPo
0c50	73 74 50 72 6f 63 65 73  73 69 6e 67 28 29 3b 0d   stProcessing();.
0c60	0a 20 20 20 20 20 20 20  20 76 6f 69 64 20 72 65   .        void re
0c70	6e 64 65 72 54 6f 53 63  72 65 65 6e 28 29 3b 0d   nderToScreen();.
0c80	0a 20 20 20 20 20 20 20  20 76 6f 69 64 20 72 65   .        void re
0c90	6e 64 65 72 53 68 61 64  6f 77 4d 61 70 28 29 3b   nderShadowMap();
0ca0	0d 0a 0d 0a 20 20 20 20  20 20 20 20 2f 2f 20 56   ....        // V
0cb0	75 6c 6b 61 6e 20 72 65  73 6f 75 72 63 65 73 0d   ulkan resources.
0cc0	0a 20 20 20 20 20 20 20  20 56 75 6c 6b 61 6e 52   .        VulkanR
0cd0	65 6e 64 65 72 65 72 2a  20 6d 5f 76 75 6c 6b 61   enderer* m_vulka
0ce0	6e 52 65 6e 64 65 72 65  72 3b 0d 0a 20 20 20 20   nRenderer;..    
0cf0	20 20 20 20 0d 0a 20 20  20 20 20 20 20 20 2f 2f       ..        //
0d00	20 52 65 6e 64 65 72 69  6e 67 20 73 74 61 74 65    Rendering state
0d10	0d 0a 20 20 20 20 20 20  20 20 62 6f 6f 6c 20 6d   ..        bool m
0d20	5f 69 6e 69 74 69 61 6c  69 7a 65 64 3b 0d 0a 20   _initialized;.. 
0d30	20 20 20 20 20 20 20 62  6f 6f 6c 20 6d 5f 68 64          bool m_hd
0d40	72 45 6e 61 62 6c 65 64  3b 0d 0a 20 20 20 20 20   rEnabled;..     
0d50	20 20 20 62 6f 6f 6c 20  6d 5f 62 6c 6f 6f 6d 45      bool m_bloomE
0d60	6e 61 62 6c 65 64 3b 0d  0a 20 20 20 20 20 20 20   nabled;..       
0d70	20 62 6f 6f 6c 20 6d 5f  69 62 6c 45 6e 61 62 6c    bool m_iblEnabl
0d80	65 64 3b 0d 0a 20 20 20  20 20 20 20 20 62 6f 6f   ed;..        boo
0d90	6c 20 6d 5f 73 68 61 64  6f 77 73 45 6e 61 62 6c   l m_shadowsEnabl
0da0	65 64 3b 0d 0a 20 20 20  20 20 20 20 20 0d 0a 20   ed;..        .. 
0db0	20 20 20 20 20 20 20 2f  2f 20 43 61 6d 65 72 61          // Camera
0dc0	20 61 6e 64 20 6c 69 67  68 74 69 6e 67 0d 0a 20    and lighting.. 
0dd0	20 20 20 20 20 20 20 43  61 6d 65 72 61 20 6d 5f          Camera m_
0de0	63 61 6d 65 72 61 3b 0d  0a 20 20 20 20 20 20 20   camera;..       
0df0	20 4c 69 67 68 74 20 6d  5f 64 69 72 65 63 74 69    Light m_directi
0e00	6f 6e 61 6c 4c 69 67 68  74 3b 0d 0a 20 20 20 20   onalLight;..    
0e10	20 20 20 20 73 74 64 3a  3a 76 65 63 74 6f 72 3c       std::vector<
0e20	4c 69 67 68 74 3e 20 6d  5f 70 6f 69 6e 74 4c 69   Light> m_pointLi
0e30	67 68 74 73 3b 0d 0a 20  20 20 20 20 20 20 20 0d   ghts;..        .
0e40	0a 20 20 20 20 20 20 20  20 2f 2f 20 53 68 61 64   .        // Shad
0e50	6f 77 20 6d 61 70 70 69  6e 67 0d 0a 20 20 20 20   ow mapping..    
0e60	20 20 20 20 53 68 61 64  6f 77 4d 61 70 2a 20 6d       ShadowMap* m
0e70	5f 73 68 61 64 6f 77 4d  61 70 3b 0d 0a 20 20 20   _shadowMap;..   
0e80	20 20 20 20 20 0d 0a 20  20 20 20 20 20 20 20 2f        ..        /
0e90	2f 20 50 6f 73 74 2d 70  72 6f 63 65 73 73 69 6e   / Post-processin
0ea0	67 0d 0a 20 20 20 20 20  20 20 20 73 74 64 3a 3a   g..        std::
0eb0	75 6e 69 71 75 65 5f 70  74 72 3c 50 6f 73 74 50   unique_ptr<PostP
0ec0	72 6f 63 65 73 73 50 69  70 65 6c 69 6e 65 3e 20   rocessPipeline> 
0ed0	6d 5f 70 6f 73 74 50 72  6f 63 65 73 73 50 69 70   m_postProcessPip
0ee0	65 6c 69 6e 65 3b 0d 0a  20 20 20 20 20 20 20 20   eline;..        
0ef0	0d 0a 20 20 20 20 20 20  20 20 2f 2f 20 50 42 52   ..        // PBR
0f00	20 70 61 72 61 6d 65 74  65 72 73 0d 0a 20 20 20    parameters..   
0f10	20 20 20 20 20 66 6c 6f  61 74 20 6d 5f 65 78 70        float m_exp
0f20	6f 73 75 72 65 3b 0d 0a  20 20 20 20 20 20 20 20   osure;..        
0f30	66 6c 6f 61 74 20 6d 5f  67 61 6d 6d 61 3b 0d 0a   float m_gamma;..
0f40	20 20 20 20 20 20 20 20  0d 0a 20 20 20 20 20 20           ..      
0f50	20 20 2f 2f 20 49 42 4c  20 72 65 73 6f 75 72 63     // IBL resourc
0f60	65 73 0d 0a 20 20 20 20  20 20 20 20 75 6e 73 69   es..        unsi
0f70	67 6e 65 64 20 69 6e 74  20 6d 5f 65 6e 76 69 72   gned int m_envir
0f80	6f 6e 6d 65 6e 74 4d 61  70 3b 0d 0a 20 20 20 20   onmentMap;..    
0f90	20 20 20 20 0d 0a 20 20  20 20 20 20 20 20 2f 2f       ..        //
0fa0	20 53 63 65 6e 65 20 6f  62 6a 65 63 74 73 0d 0a    Scene objects..
0fb0	20 20 20 20 20 20 20 20  73 74 64 3a 3a 76 65 63           std::vec
0fc0	74 6f 72 3c 52 65 6e 64  65 72 4f 62 6a 65 63 74   tor<RenderObject
0fd0	3e 20 6d 5f 72 65 6e 64  65 72 4f 62 6a 65 63 74   > m_renderObject
0fe0	73 3b 0d 0a 20 20 20 20  20 20 20 20 0d 0a 20 20   s;..        ..  
0ff0	20 20 20 20 20 20 2f 2f  20 56 75 6c 6b 61 6e 2d         // Vulkan-
1000	73 70 65 63 69 66 69 63  20 72 65 73 6f 75 72 63   specific resourc
1010	65 73 20 28 69 6d 70 6c  65 6d 65 6e 74 61 74 69   es (implementati
1020	6f 6e 20 64 65 74 61 69  6c 73 20 77 6f 75 6c 64   on details would
1030	20 62 65 20 69 6e 20 74  68 65 20 2e 63 70 70 20    be in the .cpp 
1040	66 69 6c 65 29 0d 0a 23  69 66 64 65 66 20 48 41   file)..#ifdef HA
1050	53 5f 47 4c 46 57 0d 0a  20 20 20 20 20 20 20 20   S_GLFW..        
1060	2f 2f 20 56 75 6c 6b 61  6e 20 70 69 70 65 6c 69   // Vulkan pipeli
1070	6e 65 20 61 6e 64 20 64  65 73 63 72 69 70 74 6f   ne and descripto
1080	72 20 73 65 74 73 20 77  6f 75 6c 64 20 62 65 20   r sets would be 
1090	64 65 66 69 6e 65 64 20  68 65 72 65 0d 0a 20 20   defined here..  
10a0	20 20 20 20 20 20 76 6f  69 64 2a 20 6d 5f 70 62         void* m_pb
10b0	72 50 69 70 65 6c 69 6e  65 3b 20 20 2f 2f 20 50   rPipeline;  // P
10c0	6c 61 63 65 68 6f 6c 64  65 72 20 66 6f 72 20 61   laceholder for a
10d0	63 74 75 61 6c 20 56 75  6c 6b 61 6e 20 70 69 70   ctual Vulkan pip
10e0	65 6c 69 6e 65 0d 0a 20  20 20 20 20 20 20 20 76   eline..        v
10f0	6f 69 64 2a 20 6d 5f 70  6f 73 74 50 72 6f 63 65   oid* m_postProce
1100	73 73 50 69 70 65 6c 69  6e 65 49 6e 74 65 72 6e   ssPipelineIntern
1110	61 6c 3b 20 20 2f 2f 20  50 6c 61 63 65 68 6f 6c   al;  // Placehol
1120	64 65 72 20 66 6f 72 20  70 6f 73 74 2d 70 72 6f   der for post-pro
1130	63 65 73 73 69 6e 67 20  70 69 70 65 6c 69 6e 65   cessing pipeline
1140	0d 0a 20 20 20 20 20 20  20 20 76 6f 69 64 2a 20   ..        void* 
1150	6d 5f 73 68 61 64 6f 77  50 69 70 65 6c 69 6e 65   m_shadowPipeline
1160	3b 20 20 2f 2f 20 50 6c  61 63 65 68 6f 6c 64 65   ;  // Placeholde
1170	72 20 66 6f 72 20 73 68  61 64 6f 77 20 6d 61 70   r for shadow map
1180	70 69 6e 67 20 70 69 70  65 6c 69 6e 65 0d 0a 23   ping pipeline..#
1190	65 6c 73 65 0d 0a 20 20  20 20 20 20 20 20 76 6f   else..        vo
11a0	69 64 2a 20 6d 5f 70 62  72 50 69 70 65 6c 69 6e   id* m_pbrPipelin
11b0	65 3b 0d 0a 20 20 20 20  20 20 20 20 76 6f 69 64   e;..        void
11c0	2a 20 6d 5f 70 6f 73 74  50 72 6f 63 65 73 73 50   * m_postProcessP
11d0	69 70 65 6c 69 6e 65 49  6e 74 65 72 6e 61 6c 3b   ipelineInternal;
11e0	0d 0a 20 20 20 20 20 20  20 20 76 6f 69 64 2a 20   ..        void* 
11f0	6d 5f 73 68 61 64 6f 77  50 69 70 65 6c 69 6e 65   m_shadowPipeline
1200	3b 0d 0a 23 65 6e 64 69  66 0d 0a 20 20 20 20 7d   ;..#endif..    }
1210	3b 0d 0a 7d 0d 0a 0d 0a  23 65 6e 64 69 66 20 2f   ;..}....#endif /
1220	2f 20 50 42 52 5f 52 45  4e 44 45 52 45 52 5f 48   / PBR_RENDERER_H
1230	0d 0a                                              ..
